(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{323:function(e,t,n){"use strict";var r,a=n(0),l=n.n(a),i=n(612),o=n(307),c=n(7),s=n.n(c),u=n(6),f=n.n(u),d=n(9),m=n.n(d),h=n(3),p=n.n(h),g=n(8),y=n.n(g),E=n(22),v=n.n(E),x=n(4),k=n(14),b=n(2),R=n(62),C=n(315),S=n.n(C),w=n(42),H=n.n(w),D=n(16),q=n.n(D),j=n(308),I=n.n(j),O=function(){function e(t=new P){s()(this,e),this.service=t}return f()(e,[{key:"createHelper",value:function(e){return this.service.createHelper(e)}},{key:"createHelpRequest",value:function(e){return this.service.createHelpRequest(e)}},{key:"findHelpers",value:function(e){return this.service.findHelpers(e)}},{key:"notifyHelpers",value:function(e){return this.service.notifyHelpers(e)}},{key:"getHelpRequests",value:function(){return this.service.getHelpRequests()}}]),e}();!function(e){e.Helper="helper",e.HelpRequest="HelpRequest"}(r||(r={}));var P=function(){function e(){s()(this,e)}return f()(e,[{key:"createHelper",value:function(e){return this.post(r.Helper,e)}},{key:"createHelpRequest",value:function(e){return this.post(r.HelpRequest,e)}},{key:"findHelpers",value:function(e){var t=52.5186,n=13.3761,r=Math.floor(1e4*e.latitude)/1e4,a=Math.floor(1e4*e.longitude)/1e4,l=t==r&&n==a?12:7;return Promise.resolve({count:l,skills:[{skill:{id:4,name:"Erste Hilfe"},count:2},{skill:{id:2,name:"Altenpflege"},count:1}]})}},{key:"notifyHelpers",value:function(e){return Promise.resolve()}},{key:"mockHelper",value:function(e){return{id:e.integer({min:1,max:1e5}),name:e.name(),email:e.email(),phone:e.phone({country:"uk",mobile:!0}),postcode:e.postcode()}}},{key:"mockHelpers",value:function(){for(var e=new I.a,t=e.integer({min:2,max:20}),n=new Array(t),r=0;r<t;++r)n[r]=this.mockHelper(e);return n}},{key:"getHelpRequests",value:function(){var e=[{id:1,name:"Am Tannenbusch 13",created_at:"22.03.2020 17:12 Uhr",date_start:"23.03.2020 14:00 Uhr",roles:[],skills:[],helpers:this.mockHelpers()},{id:2,name:"Rapsacker 27",created_at:"22.03.2020 17:12 Uhr",date_start:"23.03.2020 14:00 Uhr",roles:[],skills:[],helpers:this.mockHelpers()},{id:3,name:"Am Teich 4",created_at:"22.03.2020 17:12 Uhr",date_start:"23.03.2020 14:00 Uhr",roles:[],skills:[],helpers:this.mockHelpers()},{id:4,name:"Unter den Linden 27",created_at:"22.03.2020 17:12 Uhr",date_start:"23.03.2020 14:00 Uhr",roles:[],skills:[],helpers:this.mockHelpers()}];return this.get(r.HelpRequest,e)}},{key:"get",value:function(e,t){return Promise.resolve(t)}},{key:"post",value:function(e,t){var n=q()({},t);return n.id=1,Promise.resolve(n)}}]),e}();P.HOST="http://127.0.0.1/",P.ENDPOINT_PREFIX="api/v1/";var z=O;function T(e){var t=Object(a.useState)(0),n=v()(t,2),r=n[0],i=n[1],o=Object(a.useState)(e.helpRequest),c=v()(o,1)[0],s=new z;return console.log("Stage 2"),console.log(e.helperSearchDefinition),Object(a.useEffect)((function(){!function(){var t,n;H.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.helperSearchDefinition){r.next=6;break}return t=e.helpRequest,r.next=4,H.a.awrap(s.findHelpers(e.helperSearchDefinition));case 4:n=r.sent,void 0===t.skills||0==t.skills.length?i(n.count):t.skills.length>=2?i(1):i(Math.floor(n.count/(1+4*Math.random())));case 6:case"end":return r.stop()}}),null,null,null,Promise)}()}),[c.skills,e.helperSearchDefinition.latitude]),l.a.createElement(k.a,{style:{fontSize:e.fontSize}},r)}function _(e){return console.log("Stage 1. helpersearchdef"),console.log(e.helperSearchDefinition),l.a.createElement(b.a,{style:{flex:1,justifyContent:"flex-start",alignItems:"center",padding:5}},l.a.createElement(b.a,{style:{backgroundColor:"grey",width:100,height:100,borderRadius:50,borderWidth:3,justifyContent:"center",alignItems:"center"}},l.a.createElement(T,{helpRequest:e.helpRequest,helperSearchDefinition:e.helperSearchDefinition,render:e.render,fontSize:75})))}function A(e){return l.a.createElement(k.a,{style:{flex:3}},"Melde dich jetzt bei"," ","potentiellen Helfern in deiner N\xe4he. Beschreibe in deiner Nachricht den Einsatz m\xf6glichst genau.")}var W=n(110),M=n(48);function U(e){var t=Object(a.useState)([{role:{id:0,name:"Pfleger*in"},checked:!1},{role:{id:1,name:"Reinigungskraft"},checked:!1},{role:{id:2,name:"Sanit\xe4ter"},checked:!1},{role:{id:3,name:"Noch mehr"},checked:!1}]),n=v()(t,2),r=n[0],i=n[1],o=function(){var t=r.filter((function(e){return!0===e.checked})).map((function(e,t){return e.role})),n=e.helpRequest;n.roles=t,e.setHelpRequest(n)};return l.a.createElement(b.a,{style:{flex:1,backgroundColor:"white"}},l.a.createElement(b.a,{style:{flex:1,justifyContent:"flex-start",alignItems:"flex-start"}},l.a.createElement(k.a,null,"Rollen")),l.a.createElement(b.a,{style:{flex:10}},l.a.createElement(M.b,{data:r,renderItem:function(e){var t=e.item;return l.a.createElement(b.a,{style:{flex:1,flexDirection:"row",padding:5}},l.a.createElement(W.a,{value:t.checked,style:{marginRight:5},onValueChange:function(e){!function(e,t){var n=r.slice();n[e.role.id].checked=t,i(n),o()}(t,e)}}),l.a.createElement(k.a,null,t.role.name))}})))}function B(e){var t=Object(a.useState)([{skill:{id:0,name:"Erste Hilfe"},checked:!1},{skill:{id:1,name:"Altenpflege"},checked:!1},{skill:{id:2,name:"Noch mehr"},checked:!1}]),n=v()(t,2),r=n[0],i=n[1],o=function(){var t=r.filter((function(e){return!0===e.checked})).map((function(e,t){return e.skill})),n=e.helpRequest;n.skills=t,e.setHelpRequest(n)};return l.a.createElement(b.a,{style:{flex:1,backgroundColor:"white"}},l.a.createElement(b.a,{style:{flex:1,justifyContent:"flex-start",alignItems:"flex-start"}},l.a.createElement(k.a,null,"Skills")),l.a.createElement(b.a,{style:{flex:10}},l.a.createElement(M.b,{data:r,renderItem:function(e){var t=e.item;return l.a.createElement(b.a,{style:{flex:1,flexDirection:"row",padding:5}},l.a.createElement(W.a,{value:t.checked,style:{marginRight:5},onValueChange:function(e){!function(e,t){var n=r.slice();n[e.skill.id].checked=t,i(n),o()}(t,e)}}),l.a.createElement(k.a,null,t.skill.name))}})))}function N(e){return l.a.createElement(b.a,{style:{flex:1,justifyContent:"center",alignItems:"flex-start"}},l.a.createElement(k.a,{style:{fontSize:30}},e.children))}var V=n(39);function L(e){return l.a.createElement(b.a,{style:J.container},l.a.createElement(b.a,{style:{flex:1}},l.a.createElement(k.a,{style:{flex:1}},e.heading)),l.a.createElement(b.a,{style:{flex:1}},l.a.createElement(V.a,{onChangeText:function(t){return e.onChangeText(t)},style:{borderRadius:2,borderWidth:3,padding:5},placeholder:e.placeholder,onEndEditing:e.onEndEditing})))}var J=x.a.create({container:{flex:1,padding:5,flexDirection:"column",backgroundColor:"#fff"}}),F=n(227),X=n.n(F),Y=n(229);Y.a.init("AIzaSyC9cFDJwcroS2OcOO19SVJdYN9OQ6RYBWI");var G={lat:-7.30599,lng:111};function K(e){var t=Object(a.useState)(G),n=v()(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t;t=e.adressString,H.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:Y.a.from(t).then((function(t){var n=t.results[0].geometry.location;console.log(n),i(n),e.updateHelperSearchDefinition({latitude:n.lat,longitude:n.lng,skills:e.helpRequest.skills})})).catch((function(e){return console.warn(e)}));case 1:case"end":return n.stop()}}),null,null,null,Promise)}),[e.adressString]),l.a.createElement(b.a,{style:{flex:1,flexDirection:"row",backgroundColor:"white",justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.8,shadowRadius:3,elevation:3}},l.a.createElement(X.a,{style:{position:"absolute",top:0,left:0,right:0,bottom:0},initialRegion:{latitude:r.lat,longitude:r.lng,latitudeDelta:.0922,longitudeDelta:.0421},region:{latitude:r.lat,longitude:r.lng,latitudeDelta:.0922,longitudeDelta:.0421}},l.a.createElement(X.a.Marker,{coordinate:{latitude:r.lat,longitude:r.lng},title:e.adressString,description:"This is your location"})))}var Q=n(613);function Z(){return l.a.createElement(R.a,{onPress:function(){return alert("submit")}},l.a.createElement(Q.a,{start:[0,.5],end:[1,.5],colors:["#000","red"],style:{borderRadius:5}},l.a.createElement(b.a,{style:{margin:1,backgroundColor:"white",borderRadius:5}},l.a.createElement(k.a,{style:{margin:4,paddingHorizontal:6,textAlign:"center",backgroundColor:"white",color:"#000",fontSize:30}},"Jetzt anfordern"))))}function $(e){var t=Object(a.useState)(),n=v()(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=e.helpRequest;t.created_at=r,e.updateHelpRequest(t),console.log("Date"),console.log(t)}),[r]),l.a.createElement(b.a,{style:{flex:1}},l.a.createElement(b.a,{style:{flex:1}},l.a.createElement(k.a,null,"Datum: ")),l.a.createElement(b.a,{style:{flex:1}},l.a.createElement("form",null,l.a.createElement("input",{style:{borderWidth:3,padding:5,borderColor:"black"},type:"date",value:r,onChange:function(e){return i(e.target.value)}}))))}function ee(e){return l.a.createElement(b.a,{style:{flex:1,justifyContent:"flex-start"}},l.a.createElement(k.a,null,"Versuche einmal mal am Bundestag (Reichstagsgeb\xe4ude) nach Helfern zu suchen."),l.a.createElement(k.a,null,"Momentane Koordinaten: (",e.helperSearchDefinition.latitude,","," ",e.helperSearchDefinition.longitude,")."))}function te(e){var t=Object(a.useState)({id:3,name:"Babuschka Boi",created_at:"",date_start:"",roles:[],skills:[],helpers:[]}),n=v()(t,2),r=n[0],i=n[1],o=Object(a.useState)({latitude:52,longitude:21,requiredSkills:[]}),c=v()(o,2),s=c[0],u=c[1],f=Object(a.useState)(!1),d=v()(f,2),m=d[0],h=d[1],p=Object(a.useState)(),g=v()(p,2),y=g[0],E=g[1],x=function(e){i(e),h(!m),console.log(e)};return l.a.createElement(b.a,{style:ne.container},e.modalCloseComponent,l.a.createElement(b.a,{style:{flex:1,flexDirection:"row"}},l.a.createElement(N,null,"1. Daten eingeben"),l.a.createElement(N,null,"2. Verf\xfcgbare Helfer")),l.a.createElement(b.a,{style:{flex:10,flexDirection:"row"}},l.a.createElement(b.a,{style:{flex:1}},l.a.createElement(b.a,{style:{flex:1,flexDirection:"column"}},l.a.createElement(b.a,{style:{flex:2,backgroundColor:"white",justifyContent:"center",padding:5}},l.a.createElement(b.a,{style:{flex:1,flexDirection:"row"}},l.a.createElement(b.a,{style:{flex:1}},l.a.createElement(L,{heading:"Titel",placeholder:"Titel",onChangeText:function(e){var t=r;t.name=String(e),console.log(t),i(t)},onEndEditing:function(){}}),l.a.createElement(L,{heading:"Ort",placeholder:"Ort",onChangeText:E,onEndEditing:function(){}})),l.a.createElement(b.a,{style:{flex:1}},l.a.createElement($,{helpRequest:r,updateHelpRequest:x}),l.a.createElement(b.a,{style:{flex:1,padding:5,justifyContent:"center"}},l.a.createElement(k.a,{style:{}},"Dauer vor. X Stunden")))),l.a.createElement(K,{adressString:y,helpRequest:r,updateHelpRequest:x,updateHelperSearchDefinition:u})),l.a.createElement(ee,{helperSearchDefinition:s}))),l.a.createElement(b.a,{style:{flex:1,flexDirection:"column"}},l.a.createElement(b.a,{style:{flex:2,padding:5}},l.a.createElement(b.a,{style:{flex:3,flexDirection:"row"}},l.a.createElement(_,{helpRequest:r,helperSearchDefinition:s,render:m}),l.a.createElement(U,{helpRequest:r,setHelpRequest:i}),l.a.createElement(B,{helpRequest:r,setHelpRequest:x}))),l.a.createElement(b.a,{style:{flex:2}},l.a.createElement(b.a,{style:{flex:5,flexDirection:"row"}},l.a.createElement(b.a,{style:{flex:1,backgroundColor:"white",padding:10}},l.a.createElement(N,null,"Helfer anfordern"),l.a.createElement(A,{helpRequest:r}),l.a.createElement(Z,null)))))))}var ne=x.a.create({container:{flex:1,maxWidth:1024,flexDirection:"column",backgroundColor:"white"}});function re(e){var t=Object(a.useState)(!0),n=v()(t,2),r=n[0],i=n[1],o=function(e,t){return l.a.createElement(R.a,{onPress:t},l.a.createElement(b.a,{style:ae.button},l.a.createElement(k.a,null,e)))};return l.a.createElement(b.a,{style:ae.container},l.a.createElement(b.a,{style:ae.leftContainer},e.leftContent,o("+",(function(){i(!0)})),l.a.createElement(S.a,{isVisible:r},l.a.createElement(b.a,{style:ae.modalContentContainer},l.a.createElement(te,{modalCloseComponent:o("Close",(function(){i(!1)}))})))),l.a.createElement(b.a,{style:ae.midContainer},e.midContent))}var ae=x.a.create({container:{flex:1,flexDirection:"row"},leftContainer:{flex:1,borderRightWidth:1,borderRightColor:"#00000000d3"},midContainer:{flex:4,flexDirection:"column"},rightContainer:{flex:1},modalContentContainer:{flex:1,backgroundColor:"white",alignItems:"center",padding:22,borderRadius:4,borderColor:"rgba(0, 0, 0, 0.1)"},button:{flex:1,backgroundColor:"lightblue",padding:12,margin:16,justifyContent:"center",alignItems:"center",borderRadius:4,borderColor:"rgba(0, 0, 0, 0.1)"}}),le=n(85);function ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var oe=function(e){y()(r,e);var t,n=(t=r,function(){var e,n=p()(t);if(ie()){var r=p()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return s()(this,r),(t=n.call(this,e)).state={loading:!1,dataSource:[]},t}return f()(r,[{key:"componentDidMount",value:function(){this.loadHelpRequests()}},{key:"selectItem",value:function(e){var t=this.state.dataSource.map((function(t){return t.isSelected=t.request.id==e.item.request.id,t}));this.setState({dataSource:t}),this.props.selectItem(e.item.request)}},{key:"renderItem",value:function(e){var t=this,n=e.item.isSelected?ce.selectedItem:{};return l.a.createElement(R.a,{onPress:function(){return t.selectItem(e)}},l.a.createElement(b.a,{style:{padding:8,paddingLeft:16}},l.a.createElement(k.a,{style:n},e.item.request.name),l.a.createElement(k.a,{style:n},e.item.request.created_at)))}},{key:"render",value:function(){var e=this;return l.a.createElement(le.a,{data:this.state.dataSource,renderItem:function(t){return e.renderItem(t)}})}},{key:"loadHelpRequests",value:function(){var e=this;this.setState({loading:!0}),this.props.repository.getHelpRequests().then((function(t){return e.setState({loading:!1,dataSource:t.map((function(e){return{request:e,isSelected:!1}}))})}))}}]),r}(a.Component),ce={selectedItem:{fontWeight:"bold"}},se=n(136),ue=n(135),fe=n(121);function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var me=function(e){y()(r,e);var t,n=(t=r,function(){var e,n=p()(t);if(de()){var r=p()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return s()(this,r),(t=n.call(this,e)).state={data:null},t}return f()(r,[{key:"setHelpRequest",value:function(e){this.setState({data:e})}}]),f()(r,[{key:"render",value:function(){var e=this.state;if(null==e||null==e.data)return l.a.createElement(b.a,{style:he.container},l.a.createElement(k.a,{style:he.title},"Hey! Bitte w\xe4hle links ein Hilfegesuch aus"),l.a.createElement(k.a,null,"Die Daten werden dann hier angezeigt"));var t=e.data.helpers.map((function(e){return[e.email,e.phone]}));return l.a.createElement(b.a,{style:he.container},l.a.createElement(k.a,{style:he.title},this.state.data.name),l.a.createElement(k.a,null,this.state.data.date_start),l.a.createElement(b.a,{style:he.buttonContainer},l.a.createElement(se.a,{title:"Download PDF",onPress:function(){return ue.a.alert("Left button pressed")}}),l.a.createElement(b.a,{style:{width:16}}),l.a.createElement(se.a,{title:"Download CSV",onPress:function(){return ue.a.alert("Right button pressed")}})),l.a.createElement(k.a,{style:{paddingTop:16,paddingBottom:16}},"Es haben sich ",e.data.helpers.length," potenzielle Helfer:innen auf dein Gesuch gemeldet"),l.a.createElement(fe.d,{borderStyle:{borderWidth:1}},l.a.createElement(fe.b,{data:["Name","E-Mail","Telefon"],flexArr:[1,1,1],style:he.head,textStyle:he.text}),l.a.createElement(fe.e,{style:he.wrapper},l.a.createElement(fe.a,{data:e.data.helpers.map((function(e){return e.name})),style:he.title,heightArr:[28,28],textStyle:he.text}),l.a.createElement(fe.c,{data:t,flexArr:[1,1],style:he.row,textStyle:he.text}))))}}]),r}(a.Component),he={container:{flex:1,paddingLeft:16,paddingRight:16},title:{fontSize:48,fontWeight:"bold"},buttonContainer:{flexDirection:"row"},helperListItem:{flexDirection:"row",justifyContent:"space-between"},head:{height:40},wrapper:{flexDirection:"row"},tableTitle:{flex:1,backgroundColor:"#f6f8fa"},row:{height:28},text:{textAlign:"center"}};function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ge=new z,ye=function(e){y()(r,e);var t,n=(t=r,function(){var e,n=p()(t);if(pe()){var r=p()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;s()(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).leftContent=l.a.createElement(oe,{repository:ge,selectItem:function(t){return e.selectItem(t)}}),e.midContent=l.a.createElement(me,{ref:function(t){return e.details=t}}),e}return f()(r,[{key:"selectItem",value:function(e){this.details.setHelpRequest(e)}},{key:"render",value:function(){return l.a.createElement(re,{leftContent:this.leftContent,midContent:this.midContent})}}]),r}(a.Component),Ee=Object(i.a)({"Medstaff+":ye}),ve=Object(o.createBrowserApp)(Ee);function xe(){return l.a.createElement(ve,null)}n.d(t,"a",(function(){return xe}))},324:function(e,t,n){n(325),e.exports=n(593)},325:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/helfer-app/expo-service-worker.js",{scope:"/helfer-app/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[324,1,2]]]);
//# sourceMappingURL=app.5d30e86d.chunk.js.map